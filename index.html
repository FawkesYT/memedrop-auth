<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemeDrop</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@600&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body data-theme="vaporwave"> <!-- Default theme can be set here or by JS -->

    <header>
        <nav>
            <h1 id="home-link" role="button" tabindex="0" aria-label="MemeDrop Home">MemeDrop</h1>
            <div class="nav-center">
                <label for="search-bar" class="sr-only">Search memes, tags, users</label>
                <input type="search" id="search-bar" placeholder="Search memes, tags, users...">
            </div>
            <div class="nav-right">
                <div id="notification-dropdown-container">
                    <button class="nav-button icon-button" id="notificationsBtn" title="Notifications" aria-label="View Notifications" aria-haspopup="true" aria-expanded="false">
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                        <span id="notification-badge" class="hidden" aria-live="polite">0</span>
                    </button>
                    <!-- Notification dropdown will be appended here by sketch.js -->
                </div>

                <button id="uploadBtn" class="nav-button hidden">
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Upload
                </button>
                <label for="theme-selector" class="sr-only">Change Theme</label>
                <select id="theme-selector" title="Change Theme" aria-label="Change Theme">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                    <option value="vaporwave">Vaporwave</option>
                    <option value="synthwave84">Synthwave '84</option>
                    <option value="forest">Forest Whisper</option>
                    <option value="ocean">Ocean Deep</option>
                    <option value="sunset">Sunset Glow</option>
                    <option value="monochrome">Monochrome</option>
                </select>

                <button id="myAccountBtn" class="nav-button icon-button hidden" title="My Account" aria-label="View My Account">
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                    <span class="sr-only">My Account</span>
                </button>

                <div id="userInfo" class="hidden">
                    <!-- User display name and logout button will be injected by sketch.js -->
                </div>
                <button id="loginPromptBtn" class="nav-button">Login</button>

                <button id="settingsBtn" class="nav-button icon-button hidden" title="Settings" aria-label="Open Settings">
                     <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                     <span class="sr-only">Settings</span>
                </button>
            </div>
        </nav>
    </header>

    <main id="main-content-area">
        <!-- Main Gallery View (Default Initial Content) -->
        <div id="gallery-view" class="view">
            <div class="feed-controls">
                <div class="feed-tabs" role="tablist" aria-label="Meme Feeds">
                    <button id="feed-for-you" class="feed-tab-btn active" data-feed="for-you" role="tab" aria-selected="true" aria-controls="meme-gallery-panel">For You</button>
                    <button id="feed-new" class="feed-tab-btn" data-feed="new" role="tab" aria-selected="false" aria-controls="meme-gallery-panel">New</button>
                    <button id="feed-following" class="feed-tab-btn hidden" data-feed="following" role="tab" aria-selected="false" aria-controls="meme-gallery-panel">Following</button>
                    <button id="feed-favorites" class="feed-tab-btn hidden" data-feed="favorites" role="tab" aria-selected="false" aria-controls="meme-gallery-panel">My Favorites</button>
                </div>
            </div>
            <div id="meme-gallery-panel" role="tabpanel" aria-labelledby="feed-for-you">
                <div id="meme-gallery" class="meme-gallery" aria-live="polite">
                    <p>Loading memes...</p>
                    <!-- Meme posts will be dynamically inserted here by sketch.js -->
                </div>
            </div>
        </div>

        <!-- Account View (Initially Hidden, content managed by sketch.js) -->
        <div id="account-view" class="view hidden">
            <div class="account-view-container">
                <header class="account-header">
                    <img id="account-photo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="User profile picture"> <!-- Transparent placeholder -->
                    <h2 id="account-display-name">User Display Name</h2>
                    <p id="account-email" class="hidden">user@example.com</p>
                    <div class="account-user-stats">
                        <span id="account-meme-count-stat">Memes: 0</span>
                        <span id="account-follower-count-stat">Followers: 0</span>
                        <span id="account-following-count-stat">Following: 0</span>
                    </div>
                    <div class="account-actions">
                        <button id="account-follow-unfollow-btn" class="nav-button hidden">Follow</button>
                        <button id="account-edit-profile-btn" class="nav-button hidden">Edit Profile</button> <!-- For future profile editing functionality -->
                    </div>
                </header>

                <nav class="account-tabs" role="tablist" aria-label="Account Content">
                    <button class="tab-btn active" id="account-tab-memes" data-tab-target="account-memes-content" role="tab" aria-selected="true">My Memes</button>
                    <button class="tab-btn" id="account-tab-favorites" data-tab-target="account-favorites-content" role="tab" aria-selected="false">Favorites</button>
                    <button class="tab-btn" id="account-tab-followers" data-tab-target="account-followers-content" role="tab" aria-selected="false">Followers</button>
                    <button class="tab-btn" id="account-tab-following" data-tab-target="account-following-content" role="tab" aria-selected="false">Following</button>
                </nav>

                <div id="account-memes-content" class="account-tab-content active" role="tabpanel" aria-labelledby="account-tab-memes">
                    <div id="account-meme-gallery" class="meme-gallery" aria-live="polite"><p>Loading user's memes...</p></div>
                </div>
                <div id="account-favorites-content" class="account-tab-content" role="tabpanel" aria-labelledby="account-tab-favorites">
                    <div id="account-favorites-gallery" class="meme-gallery" aria-live="polite"><p>Loading favorite memes...</p></div>
                </div>
                <div id="account-followers-content" class="account-tab-content user-list-container" role="tabpanel" aria-labelledby="account-tab-followers">
                    <p>Loading followers...</p>
                    <!-- User list items will be injected by sketch.js. Example structure:
                        <div class="user-list-item" data-user-id="[followerUserId]">
                            <img src="[avatarUrl]" alt="[followerName]'s avatar" class="user-list-avatar">
                            <a href="#/user/[followerUserId]" class="user-list-name">[followerName]</a>
                            <button class="follow-action-btn nav-button hidden" data-user-id="[followerUserId]">Follow</button>
                        </div>
                    -->
                </div>
                <div id="account-following-content" class="account-tab-content user-list-container" role="tabpanel" aria-labelledby="account-tab-following">
                    <p>Loading users followed...</p>
                    <!-- User list items will be injected by sketch.js -->
                </div>
            </div>
        </div>
        <!-- More views (e.g., a dedicated settings view if not a modal) could be added here, initially hidden -->
    </main>

    <div id="modal-container" aria-live="assertive" aria-atomic="true">
        <!-- Modals for auth, upload, settings, meme detail will be injected by sketch.js -->
    </div>
    <div id="notification-area" role="log" aria-live="assertive" aria-atomic="true">
        <!-- In-page notifications will be injected by sketch.js -->
    </div>
    <div id="spinner-overlay" class="hidden" aria-hidden="true" aria-label="Loading content"><div class="spinner"></div></div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <!-- Your Application Logic -->
    <script src="sketch.js"></script>
</body>
</html>
